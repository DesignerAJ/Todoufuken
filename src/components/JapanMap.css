.japan-map-container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    animation: fadeIn 1s ease-out forwards;
}

@keyframes fadeIn {
    to {
        opacity: 1;
    }
}

.japan-map-container svg {
    width: 100%;
    height: 100%;
    max-width: 800px;
    /* Limit max width for better view on large screens */
    max-height: 80vh;
    filter: drop-shadow(0 20px 30px rgba(0, 0, 0, 0.2));
    overflow: visible;
    /* Allow hover effects to spill over */
}

/* Remove the default background rect if present or style the main group */
.geolonia-svg-map {
    background: transparent;
}

.prefecture {
    fill: var(--color-map-default);
    stroke: var(--color-bg-main);
    /* Match bg for cleaner borders */
    stroke-width: 0.5px;
    transition: fill 0.2s ease, filter 0.2s ease, transform 0.2s ease;
    cursor: pointer;
    outline: none;
    /* Remove focus outline */
}

/* Map Interactions */
.prefecture:hover {
    fill: var(--color-map-hover);
    stroke: var(--color-text-primary);
    stroke-width: 1.2px;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
    transition: fill 0.1s ease, stroke 0.1s ease;
}

.mode-quiz .prefecture:hover {
    cursor: crosshair;
}

.prefecture.is-active {
    fill: var(--color-accent) !important;
    stroke: white !important;
    stroke-width: 2px !important;
    filter: drop-shadow(0 0 20px var(--color-accent-glow)) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* If we want to show correct answer on mismatch */
.prefecture.is-correct-flash {
    animation: flashSuccess 1s ease;
}

.prefecture.is-wrong-flash {
    animation: flashError 0.5s ease;
}

@keyframes flashSuccess {

    0%,
    100% {
        fill: var(--color-map-default);
    }

    50% {
        fill: var(--color-success);
    }
}

@keyframes flashError {

    0%,
    100% {
        fill: var(--color-map-default);
    }

    50% {
        fill: var(--color-error);
    }
}